shadow$provide.module$node_modules$web3_eth_contract$src$index=function(global,require,module,exports){var _=require("module$node_modules$underscore$underscore"),core=require("module$node_modules$web3_core$src$index"),Method=require("module$node_modules$web3_core_method$src$index"),utils=require("module$node_modules$web3_utils$src$index"),Subscription=require("module$node_modules$web3_core_subscriptions$src$index").subscription,formatters=require("module$node_modules$web3_core_helpers$src$index").formatters,
errors=require("module$node_modules$web3_core_helpers$src$index").errors,promiEvent=require("module$node_modules$web3_core_promievent$src$index"),abi=require("module$node_modules$web3_eth_abi$src$index");global=function Contract(jsonInterface,address,options){var _this=this,args=Array.prototype.slice.call(arguments);if(!(this instanceof Contract))throw Error('Please use the "new" keyword to instantiate a web3.eth.contract() object!');core.packageInit(this,[this.constructor.currentProvider]);this.clearSubscriptions=
this._requestManager.clearSubscriptions;if(!jsonInterface||!Array.isArray(jsonInterface))throw Error("You must provide the json interface of the contract when instantiating a contract object.");this.options={};args=args[args.length-1];_.isObject(args)&&!_.isArray(args)&&(this.options=_.extend(this.options,this._getOrSetDefaultOptions(args)),_.isObject(address)&&(address=null));Object.defineProperty(this.options,"address",{set:function(value){value&&(_this._address=utils.toChecksumAddress(formatters.inputAddressFormatter(value)))},
get:function(){return _this._address},enumerable:!0});Object.defineProperty(this.options,"jsonInterface",{set:function(value){_this.methods={};_this.events={};_this._jsonInterface=value.map(function(method){var funcName;method.constant="view"===method.stateMutability||"pure"===method.stateMutability||method.constant;method.payable="payable"===method.stateMutability||method.payable;method.name&&(funcName=utils._jsonInterfaceMethodToString(method));if("function"===method.type){method.signature=abi.encodeFunctionSignature(funcName);
var func=_this._createTxObject.bind({method:method,parent:_this});if(_this.methods[method.name]){var cascadeFunc=_this._createTxObject.bind({method:method,parent:_this,nextMethod:_this.methods[method.name]});_this.methods[method.name]=cascadeFunc}else _this.methods[method.name]=func;_this.methods[method.signature]=func;_this.methods[funcName]=func}else"event"===method.type&&(method.signature=abi.encodeEventSignature(funcName),func=_this._on.bind(_this,method.signature),_this.events[method.name]&&
"bound "!==_this.events[method.name].name||(_this.events[method.name]=func),_this.events[method.signature]=func,_this.events[funcName]=func);return method});_this.events.allEvents=_this._on.bind(_this,"allevents");return _this._jsonInterface},get:function(){return _this._jsonInterface},enumerable:!0});var defaultAccount=this.constructor.defaultAccount,defaultBlock=this.constructor.defaultBlock||"latest";Object.defineProperty(this,"handleRevert",{get:function(){return!1===_this.options.handleRevert||
!0===_this.options.handleRevert?_this.options.handleRevert:this.constructor.handleRevert},set:function(val){_this.options.handleRevert=val},enumerable:!0});Object.defineProperty(this,"defaultCommon",{get:function(){return _this.options.common||this.constructor.defaultCommon},set:function(val){_this.options.common=val},enumerable:!0});Object.defineProperty(this,"defaultHardfork",{get:function(){return _this.options.hardfork||this.constructor.defaultHardfork},set:function(val){_this.options.hardfork=
val},enumerable:!0});Object.defineProperty(this,"defaultChain",{get:function(){return _this.options.chain||this.constructor.defaultChain},set:function(val){_this.options.chain=val},enumerable:!0});Object.defineProperty(this,"transactionPollingTimeout",{get:function(){return 0===_this.options.transactionPollingTimeout?_this.options.transactionPollingTimeout:_this.options.transactionPollingTimeout||this.constructor.transactionPollingTimeout},set:function(val){_this.options.transactionPollingTimeout=
val},enumerable:!0});Object.defineProperty(this,"transactionConfirmationBlocks",{get:function(){return 0===_this.options.transactionConfirmationBlocks?_this.options.transactionConfirmationBlocks:_this.options.transactionConfirmationBlocks||this.constructor.transactionConfirmationBlocks},set:function(val){_this.options.transactionConfirmationBlocks=val},enumerable:!0});Object.defineProperty(this,"transactionBlockTimeout",{get:function(){return 0===_this.options.transactionBlockTimeout?_this.options.transactionBlockTimeout:
_this.options.transactionBlockTimeout||this.constructor.transactionBlockTimeout},set:function(val){_this.options.transactionBlockTimeout=val},enumerable:!0});Object.defineProperty(this,"defaultAccount",{get:function(){return defaultAccount},set:function(val){val&&(defaultAccount=utils.toChecksumAddress(formatters.inputAddressFormatter(val)));return val},enumerable:!0});Object.defineProperty(this,"defaultBlock",{get:function(){return defaultBlock},set:function(val){return defaultBlock=val},enumerable:!0});
this.methods={};this.events={};this._address=null;this._jsonInterface=[];this.options.address=address;this.options.jsonInterface=jsonInterface};global.setProvider=function(provider,accounts){core.packageInit(this,[provider]);this._ethAccounts=accounts};global.prototype._getCallback=function(args){if(args&&_.isFunction(args[args.length-1]))return args.pop()};global.prototype._checkListener=function(type,event){if(event===type)throw Error('The event "'+type+"\" is a reserved event name, you can't use it.");
};global.prototype._getOrSetDefaultOptions=function(options){var gasPrice=options.gasPrice?String(options.gasPrice):null,from=options.from?utils.toChecksumAddress(formatters.inputAddressFormatter(options.from)):null;options.data=options.data||this.options.data;options.from=from||this.options.from;options.gasPrice=gasPrice||this.options.gasPrice;options.gas=options.gas||options.gasLimit||this.options.gas;delete options.gasLimit;return options};global.prototype._encodeEventABI=function(event,options){options=
options||{};var filter=options.filter||{},result={};["fromBlock","toBlock"].filter(function(f){return void 0!==options[f]}).forEach(function(f){result[f]=formatters.inputBlockNumberFormatter(options[f])});_.isArray(options.topics)?result.topics=options.topics:(result.topics=[],event&&!event.anonymous&&"ALLEVENTS"!==event.name&&result.topics.push(event.signature),"ALLEVENTS"!==event.name&&(event=event.inputs.filter(function(i){return!0===i.indexed}).map(function(i){var value=filter[i.name];return value?
_.isArray(value)?value.map(function(v){return abi.encodeParameter(i.type,v)}):abi.encodeParameter(i.type,value):null}),result.topics=result.topics.concat(event)),result.topics.length||delete result.topics);this.options.address&&(result.address=this.options.address.toLowerCase());return result};global.prototype._decodeEventABI=function(data){var event=this;data.data=data.data||"";data.topics=data.topics||[];var result=formatters.outputLogFormatter(data);"ALLEVENTS"===event.name&&(event=event.jsonInterface.find(function(intf){return intf.signature===
data.topics[0]})||{anonymous:!0});event.inputs=event.inputs||[];if(!event.anonymous){var indexedInputs=0;event.inputs.forEach(function(input){return input.indexed?indexedInputs++:null});0<indexedInputs&&data.topics.length!==indexedInputs+1&&(event={anonymous:!0,inputs:[]})}var argTopics=event.anonymous?data.topics:data.topics.slice(1);result.returnValues=abi.decodeLog(event.inputs,data.data,argTopics);delete result.returnValues.__length__;result.event=event.name;result.signature=event.anonymous||
!data.topics[0]?null:data.topics[0];result.raw={data:result.data,topics:result.topics};delete result.data;delete result.topics;return result};global.prototype._encodeMethodABI=function(){var methodSignature=this._method.signature,args=this.arguments||[],signature=!1,paramsABI=this._parent.options.jsonInterface.filter(function(json){return"constructor"===methodSignature&&json.type===methodSignature||(json.signature===methodSignature||json.signature===methodSignature.replace("0x","")||json.name===methodSignature)&&
"function"===json.type}).map(function(json){var inputLength=_.isArray(json.inputs)?json.inputs.length:0;if(inputLength!==args.length)throw Error("The number of arguments is not matching the methods required number. You need to pass "+inputLength+" arguments.");"function"===json.type&&(signature=json.signature);return _.isArray(json.inputs)?json.inputs:[]}).map(function(inputs){return abi.encodeParameters(inputs,args).replace("0x","")})[0]||"";if("constructor"===methodSignature){if(!this._deployData)throw Error("The contract has no contract data option set. This is necessary to append the constructor parameters.");
return this._deployData+paramsABI}if(paramsABI=signature?signature+paramsABI:paramsABI)return paramsABI;throw Error("Couldn't find a matching contract method named \""+this._method.name+'".');};global.prototype._decodeMethodReturn=function(outputs,returnValues){if(!returnValues)return null;returnValues=2<=returnValues.length?returnValues.slice(2):returnValues;outputs=abi.decodeParameters(outputs,returnValues);if(1===outputs.__length__)return outputs[0];delete outputs.__length__;return outputs};global.prototype.deploy=
function(options,callback){options=options||{};options.arguments=options.arguments||[];options=this._getOrSetDefaultOptions(options);if(!options.data)return utils._fireError(Error('No "data" specified in neither the given options, nor the default options.'),null,null,callback);callback=_.find(this.options.jsonInterface,function(method){return"constructor"===method.type})||{};callback.signature="constructor";return this._createTxObject.apply({method:callback,parent:this,deployData:options.data,_ethAccounts:this.constructor._ethAccounts},
options.arguments)};global.prototype._generateEventOptions=function(){var args=Array.prototype.slice.call(arguments),callback=this._getCallback(args),options=_.isObject(args[args.length-1])?args.pop():{},eventName=_.isString(args[0])?args[0]:"allevents";args="allevents"===eventName.toLowerCase()?{name:"ALLEVENTS",jsonInterface:this.options.jsonInterface}:this.options.jsonInterface.find(function(json){return"event"===json.type&&(json.name===eventName||json.signature==="0x"+eventName.replace("0x",""))});
if(!args)throw Error('Event "'+eventName+"\" doesn't exist in this contract.");if(!utils.isAddress(this.options.address))throw Error("This contract object doesn't have address set yet, please set an address first.");return{params:this._encodeEventABI(args,options),event:args,callback:callback}};global.prototype.clone=function(){return new this.constructor(this.options.jsonInterface,this.options.address,this.options)};global.prototype.once=function(event,options,callback){var args=Array.prototype.slice.call(arguments);
callback=this._getCallback(args);if(!callback)throw Error("Once requires a callback as the second parameter.");options&&delete options.fromBlock;this._on(event,options,function(err,res,sub){sub.unsubscribe();_.isFunction(callback)&&callback(err,res,sub)})};global.prototype._on=function(){var subOptions=this._generateEventOptions.apply(this,arguments);this._checkListener("newListener",subOptions.event.name,subOptions.callback);this._checkListener("removeListener",subOptions.event.name,subOptions.callback);
var subscription=new Subscription({subscription:{params:1,inputFormatter:[formatters.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(subOptions.event),subscriptionHandler:function(output){output.removed?this.emit("changed",output):this.emit("data",output);_.isFunction(this.callback)&&this.callback(null,output,this)}},type:"eth",requestManager:this._requestManager});subscription.subscribe("logs",subOptions.params,subOptions.callback||function(){});return subscription};global.prototype.getPastEvents=
function(){var subOptions=this._generateEventOptions.apply(this,arguments),getPastLogs=new Method({name:"getPastLogs",call:"eth_getLogs",params:1,inputFormatter:[formatters.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(subOptions.event)});getPastLogs.setRequestManager(this._requestManager);return getPastLogs.buildCall()(subOptions.params,subOptions.callback)};global.prototype._createTxObject=function(){var args=Array.prototype.slice.call(arguments),txObject={};"function"===this.method.type&&
(txObject.call=this.parent._executeMethod.bind(txObject,"call"),txObject.call.request=this.parent._executeMethod.bind(txObject,"call",!0));txObject.send=this.parent._executeMethod.bind(txObject,"send");txObject.send.request=this.parent._executeMethod.bind(txObject,"send",!0);txObject.encodeABI=this.parent._encodeMethodABI.bind(txObject);txObject.estimateGas=this.parent._executeMethod.bind(txObject,"estimate");if(args&&this.method.inputs&&args.length!==this.method.inputs.length){if(this.nextMethod)return this.nextMethod.apply(null,
args);throw errors.InvalidNumberOfParams(args.length,this.method.inputs.length,this.method.name);}txObject.arguments=args||[];txObject._method=this.method;txObject._parent=this.parent;txObject._ethAccounts=this.parent.constructor._ethAccounts||this._ethAccounts;this.deployData&&(txObject._deployData=this.deployData);return txObject};global.prototype._processExecuteArguments=function(args,defer){var processedArgs={};processedArgs.type=args.shift();processedArgs.callback=this._parent._getCallback(args);
"call"===processedArgs.type&&!0!==args[args.length-1]&&(_.isString(args[args.length-1])||isFinite(args[args.length-1]))&&(processedArgs.defaultBlock=args.pop());processedArgs.options=_.isObject(args[args.length-1])?args.pop():{};processedArgs.generateRequest=!0===args[args.length-1]?args.pop():!1;processedArgs.options=this._parent._getOrSetDefaultOptions(processedArgs.options);processedArgs.options.data=this.encodeABI();if(!this._deployData&&!utils.isAddress(this._parent.options.address))throw Error("This contract object doesn't have address set yet, please set an address first.");
this._deployData||(processedArgs.options.to=this._parent.options.address);return processedArgs.options.data?processedArgs:utils._fireError(Error("Couldn't find a matching contract method, or the number of parameters is wrong."),defer.eventEmitter,defer.reject,processedArgs.callback)};global.prototype._executeMethod=function(){var _this=this,args=this._parent._processExecuteArguments.call(this,Array.prototype.slice.call(arguments),defer),defer=promiEvent("send"!==args.type),ethAccounts=_this.constructor._ethAccounts||
_this._ethAccounts;if(args.generateRequest)return defer={params:[formatters.inputCallFormatter.call(this._parent,args.options)],callback:args.callback},"call"===args.type?(defer.params.push(formatters.inputDefaultBlockNumberFormatter.call(this._parent,args.defaultBlock)),defer.method="eth_call",defer.format=this._parent._decodeMethodReturn.bind(null,this._method.outputs)):defer.method="eth_sendTransaction",defer;switch(args.type){case "estimate":return(new Method({name:"estimateGas",call:"eth_estimateGas",
params:1,inputFormatter:[formatters.inputCallFormatter],outputFormatter:utils.hexToNumber,requestManager:_this._parent._requestManager,accounts:ethAccounts,defaultAccount:_this._parent.defaultAccount,defaultBlock:_this._parent.defaultBlock})).createFunction()(args.options,args.callback);case "call":return(new Method({name:"call",call:"eth_call",params:2,inputFormatter:[formatters.inputCallFormatter,formatters.inputDefaultBlockNumberFormatter],outputFormatter:function(result){return _this._parent._decodeMethodReturn(_this._method.outputs,
result)},requestManager:_this._parent._requestManager,accounts:ethAccounts,defaultAccount:_this._parent.defaultAccount,defaultBlock:_this._parent.defaultBlock,handleRevert:_this._parent.handleRevert,abiCoder:abi})).createFunction()(args.options,args.defaultBlock,args.callback);case "send":return utils.isAddress(args.options.from)?_.isBoolean(this._method.payable)&&!this._method.payable&&args.options.value&&0<args.options.value?utils._fireError(Error("Can not send value to non-payable contract method or constructor"),
defer.eventEmitter,defer.reject,args.callback):(new Method({name:"sendTransaction",call:"eth_sendTransaction",params:1,inputFormatter:[formatters.inputTransactionFormatter],requestManager:_this._parent._requestManager,accounts:_this.constructor._ethAccounts||_this._ethAccounts,defaultAccount:_this._parent.defaultAccount,defaultBlock:_this._parent.defaultBlock,transactionBlockTimeout:_this._parent.transactionBlockTimeout,transactionConfirmationBlocks:_this._parent.transactionConfirmationBlocks,transactionPollingTimeout:_this._parent.transactionPollingTimeout,
defaultCommon:_this._parent.defaultCommon,defaultChain:_this._parent.defaultChain,defaultHardfork:_this._parent.defaultHardfork,handleRevert:_this._parent.handleRevert,extraFormatters:{receiptFormatter:function(receipt){if(_.isArray(receipt.logs)){var events=_.map(receipt.logs,function(log){return _this._parent._decodeEventABI.call({name:"ALLEVENTS",jsonInterface:_this._parent.options.jsonInterface},log)});receipt.events={};var count=0;events.forEach(function(ev){ev.event?receipt.events[ev.event]?
Array.isArray(receipt.events[ev.event])?receipt.events[ev.event].push(ev):receipt.events[ev.event]=[receipt.events[ev.event],ev]:receipt.events[ev.event]=ev:(receipt.events[count]=ev,count++)});delete receipt.logs}return receipt},contractDeployFormatter:function(receipt){var newContract=_this._parent.clone();newContract.options.address=receipt.contractAddress;return newContract}},abiCoder:abi})).createFunction()(args.options,args.callback):utils._fireError(Error('No "from" address specified in neither the given options, nor the default options.'),
defer.eventEmitter,defer.reject,args.callback)}};module.exports=global}
//# sourceMappingURL=module$node_modules$web3_eth_contract$src$index.js.map
