{
"version":3,
"file":"module$node_modules$web3_providers_ws$src$index.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/web3-providers-ws/src/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$web3_providers_ws$src$index\"] = function(global,require,module,exports) {\nvar process = require('process');\nvar Buffer = require('buffer').Buffer;\n/*\n This file is part of web3.js.\n\n web3.js is free software: you can redistribute it and/or modify\n it under the terms of the GNU Lesser General Public License as published by\n the Free Software Foundation, either version 3 of the License, or\n (at your option) any later version.\n\n web3.js is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU Lesser General Public License for more details.\n\n You should have received a copy of the GNU Lesser General Public License\n along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n */\n/** @file WebsocketProvider.js\n * @authors:\n *   Fabian Vogelsteller <fabian@ethereum.org>\n * @date 2017\n */\n\n\"use strict\";\n\nvar _ = require('underscore');\nvar errors = require('web3-core-helpers').errors;\nvar Ws = require('@web3-js/websocket').w3cwebsocket;\n\nvar isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n\nvar _btoa = null;\nvar parseURL = null;\nif (isNode) {\n    _btoa = function(str) {\n        return Buffer.from(str).toString('base64');\n    };\n    var url = require('url');\n    if (url.URL) {\n        // Use the new Node 6+ API for parsing URLs that supports username/password\n        var newURL = url.URL;\n        parseURL = function(url) {\n            return new newURL(url);\n        };\n    }\n    else {\n        // Web3 supports Node.js 5, so fall back to the legacy URL API if necessary\n        parseURL = require('url').parse;\n    }\n} else {\n    _btoa = btoa;\n    parseURL = function(url) {\n        return new URL(url);\n    };\n}\n// Default connection ws://localhost:8546\n\n\n\n\nvar WebsocketProvider = function WebsocketProvider(url, options)  {\n    if (!Ws) {\n        throw new Error('websocket is not available');\n    }\n\n    var _this = this;\n    this.responseCallbacks = {};\n    this.notificationCallbacks = [];\n\n    options = options || {};\n    this._customTimeout = options.timeout;\n\n    // The w3cwebsocket implementation does not support Basic Auth\n    // username/password in the URL. So generate the basic auth header, and\n    // pass through with any additional headers supplied in constructor\n    var parsedURL = parseURL(url);\n    var headers = options.headers || {};\n    var protocol = options.protocol || undefined;\n    if (parsedURL.username && parsedURL.password) {\n        headers.authorization = 'Basic ' + _btoa(parsedURL.username + ':' + parsedURL.password);\n    }\n\n    // Allow a custom client configuration\n    var clientConfig = options.clientConfig || undefined;\n\n    // Allow a custom request options\n    // https://github.com/theturtle32/WebSocket-Node/blob/master/docs/WebSocketClient.md#connectrequesturl-requestedprotocols-origin-headers-requestoptions\n    var requestOptions = options.requestOptions || undefined;\n\n    // When all node core implementations that do not have the\n    // WHATWG compatible URL parser go out of service this line can be removed.\n    if (parsedURL.auth) {\n        headers.authorization = 'Basic ' + _btoa(parsedURL.auth);\n    }\n    this.connection = new Ws(url, protocol, undefined, headers, requestOptions, clientConfig);\n\n    this.addDefaultEvents();\n\n\n    // LISTEN FOR CONNECTION RESPONSES\n    this.connection.onmessage = function(e) {\n        /*jshint maxcomplexity: 6 */\n        var data = (typeof e.data === 'string') ? e.data : '';\n\n        _this._parseResponse(data).forEach(function(result){\n\n            var id = null;\n\n            // get the id which matches the returned id\n            if(_.isArray(result)) {\n                result.forEach(function(load){\n                    if(_this.responseCallbacks[load.id])\n                        id = load.id;\n                });\n            } else {\n                id = result.id;\n            }\n\n            // notification\n            if(!id && result && result.method && result.method.indexOf('_subscription') !== -1) {\n                _this.notificationCallbacks.forEach(function(callback){\n                    if(_.isFunction(callback))\n                        callback(result);\n                });\n\n                // fire the callback\n            } else if(_this.responseCallbacks[id]) {\n                _this.responseCallbacks[id](null, result);\n                delete _this.responseCallbacks[id];\n            }\n        });\n    };\n\n    // make property `connected` which will return the current connection status\n    Object.defineProperty(this, 'connected', {\n      get: function () {\n        return this.connection && this.connection.readyState === this.connection.OPEN;\n      },\n      enumerable: true,\n  });\n};\n\n/**\n Will add the error and end event to timeout existing calls\n\n @method addDefaultEvents\n */\nWebsocketProvider.prototype.addDefaultEvents = function(){\n    var _this = this;\n\n    this.connection.onerror = function(){\n        _this._timeout();\n    };\n\n    this.connection.onclose = function(){\n        _this._timeout();\n\n        // reset all requests and callbacks\n        _this.reset();\n    };\n\n    // this.connection.on('timeout', function(){\n    //     _this._timeout();\n    // });\n};\n\n/**\n Will parse the response and make an array out of it.\n\n @method _parseResponse\n @param {String} data\n */\nWebsocketProvider.prototype._parseResponse = function(data) {\n    var _this = this,\n        returnValues = [];\n\n    // DE-CHUNKER\n    var dechunkedData = data\n        .replace(/\\}[\\n\\r]?\\{/g,'}|--|{') // }{\n        .replace(/\\}\\][\\n\\r]?\\[\\{/g,'}]|--|[{') // }][{\n        .replace(/\\}[\\n\\r]?\\[\\{/g,'}|--|[{') // }[{\n        .replace(/\\}\\][\\n\\r]?\\{/g,'}]|--|{') // }]{\n        .split('|--|');\n\n    dechunkedData.forEach(function(data){\n\n        // prepend the last chunk\n        if(_this.lastChunk)\n            data = _this.lastChunk + data;\n\n        var result = null;\n\n        try {\n            result = JSON.parse(data);\n\n        } catch(e) {\n\n            _this.lastChunk = data;\n\n            // start timeout to cancel all requests\n            clearTimeout(_this.lastChunkTimeout);\n            _this.lastChunkTimeout = setTimeout(function(){\n                _this._timeout();\n                throw errors.InvalidResponse(data);\n            }, 1000 * 15);\n\n            return;\n        }\n\n        // cancel timeout and set chunk to null\n        clearTimeout(_this.lastChunkTimeout);\n        _this.lastChunk = null;\n\n        if(result)\n            returnValues.push(result);\n    });\n\n    return returnValues;\n};\n\n\n/**\n Adds a callback to the responseCallbacks object,\n which will be called if a response matching the response Id will arrive.\n\n @method _addResponseCallback\n */\nWebsocketProvider.prototype._addResponseCallback = function(payload, callback) {\n    var id = payload.id || payload[0].id;\n    var method = payload.method || payload[0].method;\n\n    this.responseCallbacks[id] = callback;\n    this.responseCallbacks[id].method = method;\n\n    var _this = this;\n\n    // schedule triggering the error response if a custom timeout is set\n    if (this._customTimeout) {\n        setTimeout(function () {\n            if (_this.responseCallbacks[id]) {\n                _this.responseCallbacks[id](errors.ConnectionTimeout(_this._customTimeout));\n                delete _this.responseCallbacks[id];\n            }\n        }, this._customTimeout);\n    }\n};\n\n/**\n Timeout all requests when the end/error event is fired\n\n @method _timeout\n */\nWebsocketProvider.prototype._timeout = function() {\n    for(var key in this.responseCallbacks) {\n        if(this.responseCallbacks.hasOwnProperty(key)){\n            this.responseCallbacks[key](errors.InvalidConnection('on WS'));\n            delete this.responseCallbacks[key];\n        }\n    }\n};\n\n\nWebsocketProvider.prototype.send = function (payload, callback) {\n    var _this = this;\n\n    if (this.connection.readyState === this.connection.CONNECTING) {\n        setTimeout(function () {\n            _this.send(payload, callback);\n        }, 10);\n        return;\n    }\n\n    // try reconnect, when connection is gone\n    // if(!this.connection.writable)\n    //     this.connection.connect({url: this.url});\n    if (this.connection.readyState !== this.connection.OPEN) {\n        console.error('connection not open on send()');\n        if (typeof this.connection.onerror === 'function') {\n            this.connection.onerror(new Error('connection not open'));\n        } else {\n            console.error('no error callback');\n        }\n        callback(new Error('connection not open'));\n        return;\n    }\n\n    this.connection.send(JSON.stringify(payload));\n    this._addResponseCallback(payload, callback);\n};\n\n/**\n Subscribes to provider events.provider\n\n @method on\n @param {String} type    'notifcation', 'connect', 'error', 'end' or 'data'\n @param {Function} callback   the callback to call\n */\nWebsocketProvider.prototype.on = function (type, callback) {\n\n    if(typeof callback !== 'function')\n        throw new Error('The second parameter callback must be a function.');\n\n    switch(type){\n        case 'data':\n            this.notificationCallbacks.push(callback);\n            break;\n\n        case 'connect':\n            this.connection.onopen = callback;\n            break;\n\n        case 'end':\n            this.connection.onclose = callback;\n            break;\n\n        case 'error':\n            this.connection.onerror = callback;\n            break;\n\n        // default:\n        //     this.connection.on(type, callback);\n        //     break;\n    }\n};\n\n// TODO add once\n\n/**\n Removes event listener\n\n @method removeListener\n @param {String} type    'notifcation', 'connect', 'error', 'end' or 'data'\n @param {Function} callback   the callback to call\n */\nWebsocketProvider.prototype.removeListener = function (type, callback) {\n    var _this = this;\n\n    switch(type){\n        case 'data':\n            this.notificationCallbacks.forEach(function(cb, index){\n                if(cb === callback)\n                    _this.notificationCallbacks.splice(index, 1);\n            });\n            break;\n\n        // TODO remvoving connect missing\n\n        // default:\n        //     this.connection.removeListener(type, callback);\n        //     break;\n    }\n};\n\n/**\n Removes all event listeners\n\n @method removeAllListeners\n @param {String} type    'notifcation', 'connect', 'error', 'end' or 'data'\n */\nWebsocketProvider.prototype.removeAllListeners = function (type) {\n    switch(type){\n        case 'data':\n            this.notificationCallbacks = [];\n            break;\n\n        // TODO remvoving connect properly missing\n\n        case 'connect':\n            this.connection.onopen = null;\n            break;\n\n        case 'end':\n            this.connection.onclose = null;\n            break;\n\n        case 'error':\n            this.connection.onerror = null;\n            break;\n\n        default:\n            // this.connection.removeAllListeners(type);\n            break;\n    }\n};\n\n/**\n Resets the providers, clears all callbacks\n\n @method reset\n */\nWebsocketProvider.prototype.reset = function () {\n    this._timeout();\n    this.notificationCallbacks = [];\n\n    // this.connection.removeAllListeners('error');\n    // this.connection.removeAllListeners('end');\n    // this.connection.removeAllListeners('timeout');\n\n    this.addDefaultEvents();\n};\n\nWebsocketProvider.prototype.disconnect = function () {\n    if (this.connection) {\n        this.connection.close();\n    }\n};\n\n/**\n * Returns the desired boolean.\n *\n * @method supportsSubscriptions\n * @returns {boolean}\n */\nWebsocketProvider.prototype.supportsSubscriptions = function () {\n    return true;\n};\n\nmodule.exports = WebsocketProvider;\n\n};"],
"names":["shadow$provide","global","require","module","exports","process","Buffer","_","errors","Ws","w3cwebsocket","_btoa","parseURL","Object","prototype","toString","call","URL","str","from","url","newURL","parse","btoa","WebsocketProvider","options","Error","_this","responseCallbacks","notificationCallbacks","_customTimeout","timeout","parsedURL","headers","protocol","undefined","username","password","authorization","clientConfig","requestOptions","auth","connection","addDefaultEvents","onmessage","this.connection.onmessage","e","_parseResponse","data","forEach","result","id","isArray","load","method","indexOf","callback","isFunction","defineProperty","get","readyState","OPEN","enumerable","WebsocketProvider.prototype.addDefaultEvents","onerror","this.connection.onerror","_timeout","onclose","this.connection.onclose","reset","WebsocketProvider.prototype._parseResponse","returnValues","replace","split","dechunkedData","lastChunk","JSON","clearTimeout","lastChunkTimeout","setTimeout","InvalidResponse","push","_addResponseCallback","WebsocketProvider.prototype._addResponseCallback","payload","ConnectionTimeout","WebsocketProvider.prototype._timeout","key","hasOwnProperty","InvalidConnection","send","WebsocketProvider.prototype.send","CONNECTING","console","error","stringify","on","WebsocketProvider.prototype.on","type","onopen","removeListener","WebsocketProvider.prototype.removeListener","cb","index","splice","removeAllListeners","WebsocketProvider.prototype.removeAllListeners","WebsocketProvider.prototype.reset","disconnect","WebsocketProvider.prototype.disconnect","close","supportsSubscriptions","WebsocketProvider.prototype.supportsSubscriptions"]
}
