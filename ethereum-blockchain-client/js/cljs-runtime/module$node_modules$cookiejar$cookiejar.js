shadow$provide.module$node_modules$cookiejar$cookiejar=function(global,require,module,exports){(function(){function CookieAccessInfo(domain,path,secure,script){return this instanceof CookieAccessInfo?(this.domain=domain||void 0,this.path=path||"/",this.secure=!!secure,this.script=!!script,this):new CookieAccessInfo(domain,path,secure,script)}function Cookie(cookiestr,request_domain,request_path){return cookiestr instanceof Cookie?cookiestr:this instanceof Cookie?(this.value=this.name=null,this.expiration_date=
Infinity,this.path=String(request_path||"/"),this.explicit_path=!1,this.domain=request_domain||null,this.noscript=this.secure=this.explicit_domain=!1,cookiestr&&this.parse(cookiestr,request_domain,request_path),this):new Cookie(cookiestr,request_domain,request_path)}function CookieJar(){var cookies_list,collidable_cookie;if(this instanceof CookieJar){var cookies=Object.create(null);this.setCookie=function(cookie,request_domain,request_path){cookie=new Cookie(cookie,request_domain,request_path);request_domain=
cookie.expiration_date<=Date.now();if(void 0!==cookies[cookie.name]){cookies_list=cookies[cookie.name];for(request_path=0;request_path<cookies_list.length;request_path+=1)if(collidable_cookie=cookies_list[request_path],collidable_cookie.collidesWith(cookie))return request_domain?(cookies_list.splice(request_path,1),0===cookies_list.length&&delete cookies[cookie.name],!1):cookies_list[request_path]=cookie;if(request_domain)return!1;cookies_list.push(cookie);return cookie}if(request_domain)return!1;
cookies[cookie.name]=[cookie];return cookies[cookie.name]};this.getCookie=function(cookie_name,access_info){var i;if(cookies_list=cookies[cookie_name])for(i=0;i<cookies_list.length;i+=1)if(cookie_name=cookies_list[i],cookie_name.expiration_date<=Date.now())0===cookies_list.length&&delete cookies[cookie_name.name];else if(cookie_name.matches(access_info))return cookie_name};this.getCookies=function(access_info){var matches=[],cookie_name,cookie;for(cookie_name in cookies)(cookie=this.getCookie(cookie_name,
access_info))&&matches.push(cookie);matches.toString=function(){return matches.join(":")};matches.toValueString=function(){return matches.map(function(c){return c.toValueString()}).join(";")};return matches};return this}return new CookieJar}CookieAccessInfo.All=Object.freeze(Object.create(null));exports.CookieAccessInfo=CookieAccessInfo;exports.Cookie=Cookie;Cookie.prototype.toString=function(){var str=[this.name+"\x3d"+this.value];Infinity!==this.expiration_date&&str.push("expires\x3d"+(new Date(this.expiration_date)).toGMTString());
this.domain&&str.push("domain\x3d"+this.domain);this.path&&str.push("path\x3d"+this.path);this.secure&&str.push("secure");this.noscript&&str.push("httponly");return str.join("; ")};Cookie.prototype.toValueString=function(){return this.name+"\x3d"+this.value};var cookie_str_splitter=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;Cookie.prototype.parse=function(str,request_domain,request_path){if(this instanceof Cookie){var parts=str.split(";").filter(function(value){return!!value}),pair=parts[0].match(/([^=]+)=([\s\S]*)/);
if(!pair){console.warn("Invalid cookie header encountered. Header: '"+str+"'");return}var key=pair[1];pair=pair[2];if("string"!==typeof key||0===key.length||"string"!==typeof pair){console.warn("Unable to extract values from cookie header. Cookie: '"+str+"'");return}this.name=key;this.value=pair;for(str=1;str<parts.length;str+=1)switch(pair=parts[str].match(/([^=]+)(?:=([\s\S]*))?/),key=pair[1].trim().toLowerCase(),pair=pair[2],key){case "httponly":this.noscript=!0;break;case "expires":this.expiration_date=
pair?Number(Date.parse(pair)):Infinity;break;case "path":this.path=pair?pair.trim():"";this.explicit_path=!0;break;case "domain":this.domain=pair?pair.trim():"";this.explicit_domain=!!this.domain;break;case "secure":this.secure=!0}this.explicit_path||(this.path=request_path||"/");this.explicit_domain||(this.domain=request_domain);return this}return(new Cookie).parse(str,request_domain,request_path)};Cookie.prototype.matches=function(access_info){return access_info===CookieAccessInfo.All?!0:this.noscript&&
access_info.script||this.secure&&!access_info.secure||!this.collidesWith(access_info)?!1:!0};Cookie.prototype.collidesWith=function(access_info){if(this.path&&!access_info.path||this.domain&&!access_info.domain||this.path&&0!==access_info.path.indexOf(this.path)||this.explicit_path&&0!==access_info.path.indexOf(this.path))return!1;access_info=access_info.domain&&access_info.domain.replace(/^[\.]/,"");var cookie_domain=this.domain&&this.domain.replace(/^[\.]/,"");if(cookie_domain===access_info)return!0;
if(cookie_domain){if(!this.explicit_domain)return!1;var wildcard=access_info.indexOf(cookie_domain);if(-1===wildcard||wildcard!==access_info.length-cookie_domain.length)return!1}return!0};exports.CookieJar=CookieJar;CookieJar.prototype.setCookies=function(cookies,request_domain,request_path){cookies=Array.isArray(cookies)?cookies:cookies.split(cookie_str_splitter);var successful=[],i;cookies=cookies.map(function(item){return new Cookie(item,request_domain,request_path)});for(i=0;i<cookies.length;i+=
1){var cookie=cookies[i];this.setCookie(cookie,request_domain,request_path)&&successful.push(cookie)}return successful}})()}
//# sourceMappingURL=module$node_modules$cookiejar$cookiejar.js.map
